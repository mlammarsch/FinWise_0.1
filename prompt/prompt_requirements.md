# Behebe folgende Fehler
1)
Eine Transaktion (INCOME) auf eine Einnahmenkategorie wird richtig verrechnet und auch der CATEGORY Transfer zu verfügbare Mittel ist korrekt. In der BudgetMonthCard (über Budgetservice berrechnet) funktioniert. Was nicht funktioniert, ist eine INCOME auf eine Ausgabekategorie. Das muss funktionieren. Ich habe irgendwo im Code gesehen, dass offenbar nur EXPENSES angezeigt werden. Das ist natürlich falsch. Vermutlich wird in der BUDGETMONTHCard deswegen auch kein Saldo berechnet. In den Folgemonaten wird der Saldo in der BudgetMonthCard dann wieder richtg angezeigt. Sieht mir nach einem Fehler im BudgetService aus.

2)
Ich habe eine Planbuchung angelegt (EXPENSE) mit -10€ zum 26.04. auf eine bestimmte Kategorie mit 3 Regelwiederholungen. Nach der Abspeicherung werden nun komischerweise 4 Prognosebuchungen angelegt. Nämlich bis 26.07. einschließlich. Das passt nicht. Aber ok, ich konnte das jetzt kein weiteres Mal reproduzieren. Vermutlich lag es daran, dass ich nicht am Datum gedreht habe. Wenn ich das mache, werden die Wiederolungen richtig gelesen.
Ok, nun sind es 4 Prognosebuchungen. Egal.
Was passiert nun in der BudgetMonthCard April und Mai werden weder Budget Werte angezeigt, noch finden Saldoanzeigen statt auf der betreffenden Kategorie. Erst ab +2 Monaten, dem Juni, Juli und August, werden die Salden dann nacheinander überlaufend aufaddiert. Das ist seltsam. Führe ich die erste Prognosebuchung zu einer Transaktion aus, so bekomme ich im richtigen Monat eine Transaktion angezeigt und der Saldo wird im aktuellen Monat korrekt berechnet.
Ich dachte erst, es läge an noch fehlenden Transaktionen generell in der Kategrie. Aber ein zweiter Test bestätigt es. Ich lege eine Planung an für 1. Mai mit 2 Wiederholunegen. Anstelle, dass der Saldo bereits Mai schon runtergeht, passiert das jeweisls erst einen Monat später. Betrifft nur Prognosebuchungen. Ich habe das Gefühl, dass die Saldierung hier um einen Monat versetzt ist. Prüfe mal den BalanceService dahingehend. Oder es wird tatsächlich im BudgetService noch was fehlerhaft gemacht.

3. In der PlanningTransactionForm werden die Vorhersagen der voraussichtlichen Buchungen bei Aktivierung der Wiederholung nicht nachberechnet, wenn man die Werte "nach x Vorkommen enden" oder "AmDatum" eingebe. Die Liste wird nur aktualisiert, wenn man am Startdatum rumfummelt. Die Liste soll bei allen Aktualisierungen der Wiederhohlungen nachberechnet werden.

4.
Bei der Arbeit in der PlanningTransactionForm ist mir aufgefallen, dass bei Umschaltung auf Kategorietransfer offenbar im Hintergrund das Feld AccountId nicht geleert wird. Außerdem verhält sich das Feld für Zielkategorie instabil. Beim ersten Speichern einer CATEGORYTRANSFER Planung, wird die Zielkategorie nicht fest persistiert. Trotz eingebauter Validierung, weil das Feld ja befüllt war, kann man die Planung speichern, wird aber ohne Zielkategorie ausgeführt. Erst wenn ich die Buchung nochmal öffne im Bearbeitungsmodus, sehe ich, die Zielkategorie ist leer. Wenn ich sie nun nochmal setze, wird sie richtig gespeichert. Meine Sorge ist nun, dass das bei einem Kontotransfer genauso ist.
Wichtig, erst mal müssen mit Umschaltung der Transfer/Expense zu AccountTransfer und KategorieTransfer nicht benutzte Quellen und Ziele entsprechend gelöscht werden. Bitte generell keine Kontovorbefüllung machen. Beim Öffnen steht immer gleich das erste Konto des Haushaltes im Quellkonto. Das muss man bewusst auswählen sollen. Wie gesagt, müüssen befüllte Werte, wenn die Box aufgrund der Umschaltung unvisible gemacht wird, auch geleert werden. Finde bitte den Fehler im UI oder im Planningservice, der diese Instabilität beim Speichern verursacht.
